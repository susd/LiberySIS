<% present(@report_card, ReportCard::Presenter) do |presenter| %>

<section class="legend">
  <% if presenter.value_form? %>
    <%= render 'report_cards/subjects/positional_scale' %>
  <% else %>
    <%= render 'report_cards/subjects/value_scale' %>
  <% end %>
</section>

<table class="table" id="report_card-subjects">
  <tr>
    <th></th>
    <th colspan="2">1st Period</th>
    <th colspan="2">2nd Period</th>
    <th colspan="2">3rd Period</th>
  </tr>
  <tr>
    <th>Subject</th>
    <% 3.times do %>
      <th>Quality</th>
      <th>Effort</th>
    <% end %>
  </tr>
  <tbody>
    <% presenter.subjects.each do |subject| %>
      <%= render partial: 'report_cards/subjects/subject_row', locals: {presenter: presenter, subject: subject} %>
    <% end %>
  </tbody>
</table>

<hr>

<div class="report_card-attendance">
  <h2>
    Attendance
  </h2>
  <p><em>Since <%= presenter.attendance_updated_at %> ago</em></p>
  <table class="table">
    <tr>
      <th></th>
      <th>1st Period</th>
      <th>2nd Period</th>
      <th>3rd Period</th>
    </tr>
    <tr>
      <td class="report_card-label">Days Absent</td>
      <% (1..3).each do |i| %>
      <td><%= presenter.absences(i) %></td>
      <% end %>
    </tr>
    <tr>
      <td class="report_card-label">Days Tardy</td>
      <% (1..3).each do |i| %>
      <td><%= presenter.tardies(i) %></td>
      <% end %>
    </tr>
  </table>
</div>

<hr>

<div class="report_card-comments">

  <h3>Comments</h3>
  <hr>

  <% presenter.comment_periods.each do |p, comments| %>
    <div class="comment-period">
      <h4><%= "#{p}#{p.ordinal}" %> Period</h4>
      <% comments.each do |comment| %>
      <span><%= comment.english %></span>
      <% end %>
    </div>
  <% end %>

</div>

<% end %>
